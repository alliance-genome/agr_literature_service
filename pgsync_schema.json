[
    {
        "database": "literature",
        "index": "references_index",
        "setting": {
            "number_of_shards": "1",
            "number_of_replicas": "0",
            "max_ngram_diff": "20",
            "max_result_window": 1000000,
            "analysis": {
                "filter": {
                    "ngram_filter": {
                        "type": "edge_ngram",
                        "min_gram": "1",
                        "max_gram": "20"
                    }
                },
                "normalizer": {
                    "sortNormalizer": {
                        "filter": [
                            "asciifolding",
                            "lowercase"
                        ],
                        "type": "custom"
                    }
                },
                "analyzer": {
                    "autocompleteAnalyzer": {
                        "filter": [
                            "asciifolding",
                            "lowercase"
                        ],
                        "type": "custom",
                        "tokenizer": "ngram_tokenizer"
                    },
                    "autocompleteSearchAnalyzer": {
                        "filter": [
                            "asciifolding",
                            "lowercase"
                        ],
                        "type": "custom",
                        "tokenizer": "ngram_tokenizer"
                    },
                    "default": {
                        "filter": [
                            "asciifolding",
                            "lowercase"
                        ],
                        "type": "custom",
                        "tokenizer": "ngram_tokenizer"
                    },
                    "default_search": {
                        "filter": [
                            "asciifolding",
                            "lowercase"
                        ],
                        "type": "custom",
                        "tokenizer": "ngram_tokenizer"
                    }
                },
                "tokenizer": {
                    "ngram_tokenizer": {
                        "token_chars": [
                            "letter",
                            "digit"
                        ],
                        "min_gram": "1",
                        "type": "edge_ngram",
                        "max_gram": "20"
                    }
                }
            }
        },
        "nodes": {
            "table": "reference",
            "columns": [
                "curie", "title", "resource_id", "volume", "date_published", "page_range", "abstract", "keywords", "publisher"
                , "pubmed_types", "issue_name", "category", "pubmed_publication_status"
            ],
            "transform": {
                "mapping": {
                    "curie": {
                        "type": "text",
                        "fields": {
                            "keyword": {
                                "type": "keyword",
                                "normalizer": "sortNormalizer",
                                "ignore_above": 256
                            }
                        }
                    },
                    "title": {
                        "type": "text",
                        "fields": {
                            "keyword": {
                                "type": "keyword",
                                "normalizer": "sortNormalizer",
                                "ignore_above": 256
                            }
                        }
                    },
                    "volume": {
                        "type": "text",
                        "fields": {
                            "keyword": {
                                "type": "keyword",
                                "normalizer": "sortNormalizer",
                                "ignore_above": 256
                            }
                        }
                    },
                    "date_published": {
                        "type": "text",
                        "fields": {
                            "keyword": {
                                "type": "keyword",
                                "normalizer": "sortNormalizer",
                                "ignore_above": 256
                            }
                        }
                    },
                    "page_range": {
                        "type": "text",
                        "fields": {
                            "keyword": {
                                "type": "keyword",
                                "normalizer": "sortNormalizer",
                                "ignore_above": 256
                            }
                        }
                    },
                    "abstract": {
                        "type": "text",
                        "fields": {
                            "keyword": {
                                "type": "keyword",
                                "normalizer": "sortNormalizer",
                                "ignore_above": 256
                            }
                        }
                    },
                    "publisher": {
                        "type": "text",
                        "fields": {
                            "keyword": {
                                "type": "keyword",
                                "normalizer": "sortNormalizer",
                                "ignore_above": 256
                            }
                        }
                    },
                    "pubmed_types": {
                        "type": "text",
                        "fields": {
                            "keyword": {
                                "type": "keyword",
                                "normalizer": "sortNormalizer",
                                "ignore_above": 256
                            }
                        }
                    },
                    "issue_name": {
                        "type": "text",
                        "fields": {
                            "keyword": {
                                "type": "keyword",
                                "normalizer": "sortNormalizer",
                                "ignore_above": 256
                            }
                        }
                    },
                    "category": {
                        "type": "text",
                        "fields": {
                            "keyword": {
                                "type": "keyword",
                                "normalizer": "sortNormalizer",
                                "ignore_above": 256
                            }
                        }
                    },
                    "pubmed_publication_status": {
                        "type": "text",
                        "fields": {
                            "keyword": {
                                "type": "keyword",
                                "normalizer": "sortNormalizer",
                                "ignore_above": 256
                            }
                        }
                    }
                }
            },
            "children":[
                {
                    "table": "author",
                    "columns": [
                        "orcid", "first_author", "corresponding_author", "affiliations", "first_name", "last_name"
                    ],
                    "relationship": {
                        "variant": "object",
                        "type": "one_to_many",
                        "foreign_key": {
                            "child": ["reference_id"],
                            "parent": ["reference_id"]
                        }
                    },
                    "transform": {
                        "mapping": {
                            "orcid": {
                                "type": "text",
                                "fields": {
                                    "keyword": {
                                        "type": "keyword",
                                        "normalizer": "sortNormalizer",
                                        "ignore_above": 256
                                    }
                                }
                            },
                            "affiliations": {
                                "type": "text",
                                "fields": {
                                    "keyword": {
                                        "type": "keyword",
                                        "normalizer": "sortNormalizer",
                                        "ignore_above": 256
                                    }
                                }
                            },
                            "first_name": {
                                "type": "text",
                                "fields": {
                                    "keyword": {
                                        "type": "keyword",
                                        "normalizer": "sortNormalizer",
                                        "ignore_above": 256
                                    }
                                }
                            },
                            "last_name": {
                                "type": "text",
                                "fields": {
                                    "keyword": {
                                        "type": "keyword",
                                        "normalizer": "sortNormalizer",
                                        "ignore_above": 256
                                    }
                                }
                            }
                        }
                    }
                },
                {
                    "table": "resource",
                    "columns":[
                       "title", "title_synonyms", "iso_abbreviation", "medline_abbreviation", "publisher", "volumes"
                       ,"abstract", "summary"
                    ],
                    "relationship": {
                        "variant": "object",
                        "type": "one_to_many",
                        "foreign_key": {
                            "child": [
                                "resource_id"
                            ],
                            "parent": [
                                "resource_id"
                            ]
                        }
                    },
                    "transform": {
                        "mapping": {
                            "title": {
                                "type": "text",
                                "fields": {
                                    "keyword": {
                                        "type": "keyword",
                                        "normalizer": "sortNormalizer",
                                        "ignore_above": 256
                                    }
                                }
                            },
                            "title_synonyms": {
                                "type": "text",
                                "fields": {
                                    "keyword": {
                                        "type": "keyword",
                                        "normalizer": "sortNormalizer",
                                        "ignore_above": 256
                                    }
                                }
                            },
                            "iso_abbreviation": {
                                "type": "text",
                                "fields": {
                                    "keyword": {
                                        "type": "keyword",
                                        "normalizer": "sortNormalizer"
                                    }
                                }
                            },
                            "medline_abbreviation": {
                                "type": "text",
                                "fields": {
                                    "keyword": {
                                        "type": "keyword",
                                        "normalizer": "sortNormalizer",
                                        "ignore_above": 256
                                    }
                                }
                            },
                            "publisher": {
                                "type": "text",
                                "fields": {
                                    "keyword": {
                                        "type": "keyword",
                                        "normalizer": "sortNormalizer"
                                    }
                                }
                            },
                            "volumes": {
                                "type": "text",
                                "fields": {
                                    "keyword": {
                                        "type": "keyword",
                                        "normalizer": "sortNormalizer",
                                        "ignore_above": 256
                                    }
                                }
                            },
                            "abstract": {
                                "type": "text",
                                "fields": {
                                    "keyword": {
                                        "type": "keyword",
                                        "normalizer": "sortNormalizer",
                                        "ignore_above": 256
                                    }
                                }
                            },
                            "summary": {
                                "type": "text",
                                "fields": {
                                    "keyword": {
                                        "type": "keyword",
                                        "normalizer": "sortNormalizer",
                                        "ignore_above": 256
                                    }
                                }
                            }
                        }
                    }
                },
                {
                    "table": "cross_reference",
                    "columns":[
                       "curie", "is_obsolete"
                    ],
                    "relationship": {
                        "variant": "object",
                        "type": "one_to_many",
                        "foreign_key": {
                            "child": [
                                "reference_id"
                            ],
                            "parent": [
                                "reference_id"
                            ]
                        }
                    },
                    "transform": {
                        "mapping": {
                            "curie": {
                                "type": "text",
                                "fields": {
                                    "keyword": {
                                        "type": "keyword",
                                        "normalizer": "sortNormalizer",
                                        "ignore_above": 256
                                    }
                                }
                            }
                        }
                    }
                }
            ] 
        }
    }
]